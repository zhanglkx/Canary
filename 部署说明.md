# 🚀 一键部署说明

## 💡 核心功能

**本地代码更新后，一键部署到服务器！**

## 🎯 使用方法

```bash
./deploy.sh
```

## ⚡ 优化特性

- **🔨 强制构建最新代码** - 确保部署的是当前代码
- **📦 并行处理** - 同时构建、导出、上传，提升速度
- **🔍 智能健康检查** - 自动验证服务是否正常
- **🧹 自动清理** - 清理临时文件，不占用空间
- **⚠️ 错误处理** - 构建失败时自动使用备用镜像

## 📋 执行流程

1. ✅ **检查服务器连接**
2. ✅ **构建最新镜像** (基于当前代码)
3. ✅ **并行导出压缩** (减少文件大小)
4. ✅ **并行上传** (API + Web 同时上传)
5. ✅ **上传配置文件**
6. ✅ **服务器部署** (停止旧服务 → 加载镜像 → 启动新服务)
7. ✅ **健康检查** (确认服务正常)
8. ✅ **清理临时文件**

## 🌐 访问地址

部署完成后：
- **主站**: http://8.159.144.140
- **API**: http://8.159.144.140:4000
- **直接访问**: http://8.159.144.140:3000

## 🔧 故障处理

- **构建失败**: 脚本会自动使用备用镜像
- **上传中断**: 重新执行脚本即可
- **服务异常**: 查看健康检查结果

---

**🎉 完全绕过 GitHub，解决超时问题，真正的一键部署！**